<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <meta name="description" content="" />
  <meta name="author" content="" />
  <title>Admin</title>
  <link href="https://cdn.jsdelivr.net/npm/simple-datatables@latest/dist/style.css" rel="stylesheet" />
  <link href="/public/stylesheet/css/productccss.css" rel="stylesheet" />
  <script src="https://use.fontawesome.com/releases/v6.1.0/js/all.js" crossorigin="anonymous"></script>
</head>

<body class="sb-nav-fixed">

  <%- include('../partials/admin-header')%>
    <div id="la">

      <div id="layoutSidenav_content" class="container-fluid">

        <div class="container-fluid px-4">
          <h1 class="mt-4">Coupon</h1>
          <button type="button" class="btn btn-dark mb-2" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
            Add Coupon
          </button>
        </div>
        <!-- add product -->

        <div class="modal fade " id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
          aria-labelledby="staticBackdropLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="staticBackdropLabel">Add Coupon</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <form action="/admincoupons" method="post"  >
                  <div class="form-group">
                   
                    <label  class="form-label">Coupon</label>
                    <input class="form-control" type="text"  name="name">
                    <label  class="form-label">Discount %</label>
                    <input class="form-control" type="number"  name="discount">
                    <label  class="form-label">Min purchase amount</label>
                    <input class="form-control" type="number"  name="minpurchase">
                    <label  class="form-label">Max Discount amount</label>
                    <input class="form-control" type="number"  name="maxdiscount">
                    <label  class="form-label">Created date</label>
                    <input class="form-control" type="date"  name="crearedate">
                    <label  class="form-label">Expire date</label>
                    <input class="form-control" type="date"  name="expiredate">
                    
                   
                    
                  </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            <button type="submit" class="btn btn-primary">Submit</button>
          </form>


              </div>
            </div>
          </div>
        </div>


        <div class="card mb-4">
       

          <div class="card-body">
            <% if(coupondata!=null) { %>
              <table id="datatablesSimple">
                <thead>
                  <tr>
                    <!-- <th>No.</th> -->
                    <th>Coupon</th>
                    <th>Discount(%)</th>
                    <th>Min purchase amount</th>
                    <th>Max discound amount</th>
                    <th>Created date</th>
                    <th>Expire date</th>
                    <th>Status</th>
                    <th>User</th>
                    <th>Discounted total</th>


                  </tr>
                </thead>
                <tbody>
                  <% coupondata.forEach((coupondata)=>{ %>
                    <!-- created date -->
                    <%let date = coupondata.createddate %>
                    <%=console.log(date)%>
                    <%let isoString = date.toISOString()%>
                    <%let createddate = isoString.split('T')[0]%>
                   <!-- expired date -->
                   <%let dat = coupondata.expiredate %>
                   <%=console.log(dat)%>
                   <%let isoStrin = dat.toISOString()%>
                   <%let expiredate = isoStrin.split('T')[0]%>
                   
                    
                    <tr>
                     
                      <td><%=coupondata.name%></td>
                      <td><%=coupondata.discount%></td>
                      <td><%=coupondata.minpurchaseamount%></td>
                      <td><%=coupondata.maxdiscount%></td>
                      <td><%=createddate %></td>
                      <td><%=expiredate %></td>
                      <td><%=coupondata.status%></td>
                      <td><%=coupondata.userId%></td>
                      <td><%=coupondata.discountedtotal%></td>


                    </tr>
                    <%})%>
                </tbody>
              </table>
              <%}%>

          </div>
        </div>

      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/public/javascript/js/scripts.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js" crossorigin="anonymous"></script>
    <script src="/public/assets/demo/chart-area-demo.js"></script>
    <script src="/public/assets/demo/chart-bar-demo.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/simple-datatables@latest" crossorigin="anonymous"></script>
    <script src="/public/javascript/js/datatables-simple-demo.js"></script>
</body>

</html>